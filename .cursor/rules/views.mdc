---
description: Django views conventions - no generic views, fat models thin views
globs: "**/views.py"
alwaysApply: false
---

# Django Views Conventions

## No Generic Views

All Views must be class based views that dont use generic views. This means every single view written must be in the following way

```python
class SomeRandom(View):
    def get(self, request):
        ...

    def post(self,request):
        ...
```

Optionally we can also define a Base View with all the common mixins of multiple Views and create a Base View. However this baseview is also required to inherit from View and not from any generic views.

Additionally always prefer Mixins over @method_decorater

> TLDR: Never use Generic views and inherit from `View`

## Fat Models and Thin Views

Views must be as minimal as possible. It is ok to include the context dictionary within a view even though it should be minimal. However, if a context dictionary is extremely long (over 50 loc) we should move it to a services file. and call it as a method.

Most views that get too long are long because of database calls and processing logic. Databases are represented in `models.py` and therefore we will create class methods inside models.py to get the data for the view

Here is an example:

```python
# Create your views here.
class DiveSiteIndexView(View):

    def get(self, request):
        dive_sites = DiveSite.objects.all()
        settings = DiveSiteSetting.get_for_view()
        context = {
            'dive_sites': dive_sites,
            "cover_image": settings.cover,
            "cover_text": settings.title,
            "cover_subtext": settings.subtitle,
        }
        return render(request, "divesites/index.html", context)
```

Instead of keeping the settings data in individual lines in the view we are moving it completely to the respected model of the models.py as a class method. This is not a model method but a classmethod inside the model. so it doesnt represent a single object or instance of the model but by keeping this logic in models.py we can have a really small views.py file.

>TLDR: Fat models, thin views

## Pagination

Pagination does make sense for tables and some data structured while it does not for others. Decide based on the data.

For example Team Members are not likely to be an entry that would need pagination so the default is to not add pagination. however a blog entry by default needs pagination as we are expected to add more and more every day.

> TLDR: Pagination should be added when it seems nessesary
